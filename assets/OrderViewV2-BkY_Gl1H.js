import{r as n,w as H,o as l,c as a,a as d,b as e,d as U,e as m,j as I,F as V,k as M,t as v,v as y,n as F,f as w,g as q,h as A,l as _,i as L}from"./index-Dz8X4DfO.js";import{a as G}from"./axios-Cm0UX6qg.js";const z={key:0,class:"flex items-center justify-center min-h-screen"},W=e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 text-lg"},"è®€å–ä¸­...")],-1),Y=[W],Z={key:1,class:"flex items-center justify-center p-6 min-h-screen"},J={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},K=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"ğŸ“…"),e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"é†«ç™‚é ç´„"),e("p",{class:"text-gray-600 text-sm"},"è«‹é¸æ“‡é ç´„é¡å‹")],-1),Q={class:"space-y-4"},X={key:2,class:"flex items-center justify-center p-6 min-h-screen"},ee={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},te=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"),e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"é¸æ“‡å®¶å±¬"),e("p",{class:"text-gray-600 text-sm"},"è«‹é¸æ“‡è¦é ç´„çš„å®¶å±¬")],-1),se=e("label",{for:"family",class:"block font-bold text-gray-700 mb-2"},[w(" å®¶å±¬å§“å "),e("span",{class:"text-red-500"},"*")],-1),oe=e("option",{value:"",disabled:""},"è«‹é¸æ“‡å®¶å±¬",-1),le=["value"],ae=e("button",{type:"submit",class:"flex-1 bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," ä¸‹ä¸€æ­¥ â†’ ",-1),ne={key:3,class:"flex items-center justify-center p-6 min-h-screen"},re={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},de={class:"text-center mb-6"},ue=e("div",{class:"text-5xl mb-4"},"ğŸ“…",-1),ie=e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"é†«ç™‚é ç´„",-1),ce=e("p",{class:"text-gray-600 text-sm"},"è«‹å¡«å¯«é ç´„è³‡è¨Š",-1),me={class:"mt-2 text-sm text-blue-600"},pe=e("label",{for:"name",class:"block font-bold text-gray-700 mb-2"},[w(" å§“å "),e("span",{class:"text-red-500"},"*")],-1),be=["readonly"],fe={key:0,class:"text-red-500 text-xs mt-1"},ve=e("label",{for:"phone",class:"block font-bold text-gray-700 mb-2"},[w(" è¯çµ¡é›»è©± "),e("span",{class:"text-red-500"},"*")],-1),xe=["readonly"],ge={key:0,class:"text-red-500 text-xs mt-1"},he=e("label",{for:"department",class:"block font-bold text-gray-700 mb-2"},[w(" ç§‘åˆ¥ "),e("span",{class:"text-red-500"},"*")],-1),ye=e("option",{value:"",disabled:""},"è«‹é¸æ“‡ç§‘åˆ¥",-1),_e=["value"],we={key:0,class:"text-red-500 text-xs mt-1"},ke=e("label",{for:"date",class:"block font-bold text-gray-700 mb-2"},[w(" å°±è¨ºæ—¥ "),e("span",{class:"text-red-500"},"*")],-1),De={key:0,class:"text-red-500 text-xs mt-1"},Ne=e("label",{for:"doctor",class:"block font-bold text-gray-700 mb-2"},"ç´„è¨ºé†«ç”Ÿ",-1),Se=e("label",{for:"issue",class:"block font-bold text-gray-700 mb-2"},"çœ‹è¨ºå•é¡Œ/å‚™è¨»äº‹é …",-1),Ve=e("label",{for:"notes",class:"block font-bold text-gray-700 mb-2"},"å…¶ä»–å‚™è¨»",-1),Ce={class:"flex space-x-3"},Pe=["disabled"],Ee={key:0},Te={key:1},Ue={key:4,class:"flex items-center justify-center p-6 min-h-screen"},Ie={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},Me=q('<div class="mb-6"><div class="text-6xl mb-4">ğŸ”’</div><h1 class="text-2xl font-bold text-gray-800 mb-2">å°šæœªè¨­å®šè£ç½®</h1><p class="text-gray-600 text-sm">æ‚¨éœ€è¦å…ˆå®Œæˆè£ç½®è¨­å®šæ‰èƒ½ä½¿ç”¨é ç´„åŠŸèƒ½</p></div><div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6 text-left"><p class="text-sm text-gray-700">âš ï¸ è«‹å…ˆç¶å®šæ‚¨çš„èº«åˆ†è­‰è™Ÿç¢¼</p><p class="text-sm text-gray-700 mt-1">å®Œæˆè¨­å®šå¾Œå³å¯é€²è¡Œé ç´„</p></div>',2),Fe={key:5,class:"flex items-center justify-center p-6 min-h-screen"},Oe={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},$e=e("div",{class:"mb-6"},[e("div",{class:"text-6xl mb-4"},"âœ…"),e("h2",{class:"text-2xl font-bold text-green-600 mb-2"},"é ç´„æˆåŠŸï¼"),e("p",{class:"text-gray-700"},"æ‚¨çš„é ç´„å·²é€å‡º")],-1),je={class:"bg-green-50 border-l-4 border-green-500 p-4 mb-6 text-left"},Be=e("p",{class:"text-sm text-gray-700"},"âœ“ æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„é ç´„ç”³è«‹",-1),Re=e("p",{class:"text-sm text-gray-700 mt-2"},"è¨ºæ‰€å°‡ç›¡å¿«èˆ‡æ‚¨è¯ç¹«ç¢ºèªé ç´„æ™‚é–“",-1),He={class:"mt-3 pt-3 border-t border-green-200"},qe=e("p",{class:"text-sm font-bold text-gray-800"},"é ç´„è³‡è¨Šï¼š",-1),Ae={class:"text-sm text-gray-700"},Le={class:"text-sm text-gray-700"},Ge={class:"text-sm text-gray-700"},ze={class:"text-sm text-gray-700"},We=e("div",{class:"bg-blue-50 rounded-lg p-4 mb-6"},[e("p",{class:"text-sm text-gray-600"},"å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹ç›´æ¥è¯ç¹«è¨ºæ‰€"),e("p",{class:"text-xs text-gray-500 mt-2"},"ï¼ˆæ¸¬è©¦æ¨¡å¼ - æœªå¯¦éš›é€å‡ºï¼‰")],-1),Ye={__name:"OrderV2",props:["userid"],setup(C){const x=C,u=n(null);console.log("userID",x.userid);const i=n(!0),p=n(!1),c=n(!1),g=n(!1),D=n(!1),P=n(!1),k=n(!1),b=n(!1),f=n(null),h=n(""),O=n(""),N=n({personid:"",personname:"",personphone:"",family_members:[]}),$=["ANES/éº»é†‰ç–¼ç—›ç§‘","BS/ä¹³æˆ¿å¤–ç§‘","CM/èƒ¸è…”å…§ç§‘","CVS/å¿ƒè‡Ÿè¡€ç®¡å¤–ç§‘","CRS/ç›´è…¸å¤–ç§‘","CS/èƒ¸è…”å¤–ç§‘","DERM/çš®è†šç§‘","CV/å¿ƒè‡Ÿå…§ç§‘","Diet/ç‡Ÿé¤Šè«®è©¢","ENT/è€³é¼»å–‰ç§‘","FM/å®¶åº­é†«å­¸ç§‘","GI/èƒƒè…¸è‚è†½ç§‘","GS/ä¸€èˆ¬å¤–ç§‘","GU/æ³Œå°¿å¤–ç§‘","OBGY/å©¦ç”¢ç§‘","HEMA/è¡€æ¶²è…«ç˜¤ç§‘","NS/ç¥ç¶“å¤–ç§‘","INF/æ„ŸæŸ“ç§‘","META/æ–°é™³ä»£è¬ç§‘","NEPH/è…è‡Ÿå…§ç§‘","NEUR/ç¥ç¶“å…§ç§‘","OPH/çœ¼ç§‘","ORTH/éª¨ç§‘","PED/å°å…’ç§‘","PS/æ•´å½¢å¤–ç§‘","PSY/ç²¾ç¥ç§‘","REHA/å¾©å¥ç§‘","IMRH/é¢¨æ¿•å…ç–«ç§‘","CADP/è…¹è†œé€æ","å¿ƒç†è«®å•†","PEDS/å°å…’å¤–ç§‘"],s=n({method:"addOrder",personName:"",personPhone:"",issue:"",doctor:"",department:"",orderDate:"",notes:""});let S=null;const E=r=>{f.value=r,p.value=!1,r==="self"?(s.value.personName=N.value.personname,s.value.personPhone=N.value.personphone,g.value=!0):r==="family"&&(c.value=!0)},j=()=>{h.value&&(s.value.personName=h.value.name,s.value.personPhone=h.value.phone,c.value=!1,g.value=!0)},T=()=>{g.value=!1,c.value=!1,p.value=!0,f.value=null,h.value="",s.value.personName="",s.value.personPhone="",s.value.department="",s.value.orderDate="",s.value.doctor="",s.value.issue="",s.value.notes="",b.value=!1},B=()=>{if(b.value=!1,!s.value.personName||!s.value.personPhone||!s.value.department||!s.value.orderDate){b.value=!0;return}S&&clearTimeout(S),S=setTimeout(()=>{k.value=!0,setTimeout(()=>{k.value=!1,g.value=!1,P.value=!0},1500)},2e3)},R=()=>{const r=new URLSearchParams;r.append("userid",x.userid),G({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/order_get_user_registered",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{console.log(o);const t=o.data;t.status==="success"&&t.result==="success"?(N.value={personid:t.personid,personname:t.personname,personphone:t.personphone,family_members:t.family_members||[]},O.value=t.personid,u.value=t,p.value=!0,i.value=!1):t.result==="useridnotexist"?(p.value=!1,D.value=!0,i.value=!1,u.value=t):t.result==="personidnotexist"?(i.value=!1,alert(t.message||"è«‹é‡æ–°ç¶å®šæˆ–è¯çµ¡è¨ºæ‰€"),D.value=!0,u.value=t):t.status==="error"&&(i.value=!1,alert("ç³»çµ±éŒ¯èª¤: "+(t.message||"è«‹ç¨å¾Œå†è©¦")),u.value=t)}).catch(o=>{var t;console.log(o),i.value=!1,alert("é€£ç·šéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦"),u.value=((t=o.response)==null?void 0:t.data)||o})};return H(x,(r,o)=>{console.log("user.userid",x.userid),R()}),(r,o)=>(l(),a(V,null,[i.value?(l(),a("div",z,Y)):d("",!0),p.value?(l(),a("div",Z,[e("div",J,[K,e("div",Q,[e("button",{onClick:o[0]||(o[0]=t=>E("self")),class:"w-full bg-blue-500 text-white px-6 py-4 rounded-md hover:bg-blue-600 transition font-medium shadow-sm text-lg"}," ğŸ‘¤ å€‹äººé ç´„ "),e("button",{onClick:o[1]||(o[1]=t=>E("family")),class:"w-full bg-gray-300 text-gray-500 px-6 py-4 rounded-md cursor-not-allowed transition font-medium shadow-sm text-lg opacity-60",title:"æ­¤åŠŸèƒ½å°šæœªé–‹æ”¾"}," ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶å±¬é ç´„ (å°šæœªé–‹æ”¾) ")])])])):d("",!0),c.value?(l(),a("div",X,[e("div",ee,[te,e("form",{class:"space-y-5",onSubmit:U(j,["prevent"])},[e("div",null,[se,m(e("select",{id:"family","onUpdate:modelValue":o[2]||(o[2]=t=>h.value=t),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",required:""},[oe,(l(!0),a(V,null,M(r.familyMembers,t=>(l(),a("option",{key:t.id,value:t},v(t.name),9,le))),128))],512),[[I,h.value]])]),e("div",{class:"flex space-x-3"},[e("button",{type:"button",onClick:T,class:"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-md hover:bg-gray-400 transition font-medium shadow-sm"}," â† è¿”å› "),ae])],32)])])):d("",!0),g.value?(l(),a("div",ne,[e("div",re,[e("div",de,[ue,ie,ce,e("div",me,v(f.value==="self"?"ğŸ‘¤ å€‹äººé ç´„":"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶å±¬é ç´„"),1)]),e("form",{class:"space-y-5",onSubmit:o[10]||(o[10]=U(t=>B(),["prevent"]))},[e("div",null,[pe,m(e("input",{type:"text",id:"name","onUpdate:modelValue":o[3]||(o[3]=t=>s.value.personName=t),class:F(["w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",{"bg-gray-100":f.value==="self"}]),placeholder:"è«‹è¼¸å…¥å§“å",readonly:f.value==="self",required:""},null,10,be),[[y,s.value.personName]]),b.value&&!s.value.personName?(l(),a("p",fe,"è«‹è¼¸å…¥å§“å")):d("",!0)]),e("div",null,[ve,m(e("input",{type:"text",id:"phone","onUpdate:modelValue":o[4]||(o[4]=t=>s.value.personPhone=t),pattern:"[0-9]+",class:F(["w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",{"bg-gray-100":f.value==="self"}]),placeholder:"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼",readonly:f.value==="self",required:""},null,10,xe),[[y,s.value.personPhone]]),b.value&&!s.value.personPhone?(l(),a("p",ge,"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼")):d("",!0)]),e("div",null,[he,m(e("select",{id:"department","onUpdate:modelValue":o[5]||(o[5]=t=>s.value.department=t),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",required:""},[ye,(l(),a(V,null,M($,t=>e("option",{value:t,key:t},v(t),9,_e)),64))],512),[[I,s.value.department]]),b.value&&!s.value.department?(l(),a("p",we,"è«‹é¸æ“‡ç§‘åˆ¥")):d("",!0)]),e("div",null,[ke,m(e("input",{type:"date",id:"date","onUpdate:modelValue":o[6]||(o[6]=t=>s.value.orderDate=t),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",required:""},null,512),[[y,s.value.orderDate]]),b.value&&!s.value.orderDate?(l(),a("p",De,"è«‹é¸æ“‡å°±è¨ºæ—¥")):d("",!0)]),e("div",null,[Ne,m(e("input",{type:"text",id:"doctor","onUpdate:modelValue":o[7]||(o[7]=t=>s.value.doctor=t),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",placeholder:"é¸å¡«"},null,512),[[y,s.value.doctor]])]),e("div",null,[Se,m(e("textarea",{id:"issue","onUpdate:modelValue":o[8]||(o[8]=t=>s.value.issue=t),rows:"3",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition resize-none",placeholder:"è«‹æè¿°æ‚¨çš„çœ‹è¨ºå•é¡Œæˆ–å‚™è¨»"},null,512),[[y,s.value.issue]])]),e("div",null,[Ve,m(e("textarea",{id:"notes","onUpdate:modelValue":o[9]||(o[9]=t=>s.value.notes=t),rows:"3",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition resize-none",placeholder:"æ‚¨æ–¹ä¾¿ç´„è¨ºçš„æ™‚é–“æˆ–å…¶ä»–è³‡è¨Š"},null,512),[[y,s.value.notes]])]),e("div",Ce,[e("button",{type:"button",onClick:T,class:"flex-1 bg-gray-300 text-gray-700 px-6 py-3 rounded-md hover:bg-gray-400 transition font-medium shadow-sm"}," â† è¿”å› "),e("button",{type:"submit",class:"flex-1 bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",disabled:k.value},[k.value?(l(),a("span",Ee,"â³ é€å‡ºä¸­...")):(l(),a("span",Te,"âœ“ ç¢ºèªé ç´„"))],8,Pe)])],32)])])):d("",!0),D.value?(l(),a("div",Ue,[e("div",Ie,[Me,e("button",{onClick:o[11]||(o[11]=t=>r.$router.push("/")),class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," å‰å¾€è¨­å®š ")])])):d("",!0),P.value?(l(),a("div",Fe,[e("div",Oe,[$e,e("div",je,[Be,Re,e("div",He,[qe,e("p",Ae,"å§“åï¼š"+v(s.value.personName),1),e("p",Le,"é›»è©±ï¼š"+v(s.value.personPhone),1),e("p",Ge,"ç§‘åˆ¥ï¼š"+v(s.value.department),1),e("p",ze,"å°±è¨ºæ—¥ï¼š"+v(s.value.orderDate),1)])]),We,e("button",{onClick:o[12]||(o[12]=t=>r.$emit("close-window")),class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," é—œé–‰è¦–çª— ")])])):d("",!0)],64))}},Ze={class:"text-xl"},Qe={__name:"OrderViewV2",setup(C){const x=n(!1),u=n(null),i=n(null);A(async()=>{_.init({liffId:"1657869644-x3BZd5wE"}).then(()=>{_.isLoggedIn()&&(x.value=_.isLoggedIn(),u.value=_.getDecodedIDToken().sub,i.value=_.getDecodedIDToken().email)}).catch(c=>{console.log(c.code,c.message)})});const p=()=>{_.closeWindow()};return(c,g)=>(l(),a("div",Ze,[L(Ye,{onCloseWindow:p,userid:u.value},null,8,["userid"])]))}};export{Qe as default};
