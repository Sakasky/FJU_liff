import{r as a,w as I,o as n,c as r,a as d,b as e,d as S,e as c,v as f,j as U,F as D,k as T,f as h,g as E,t as O,h as M,l as v,i as R}from"./index-CU8-8Y5g.js";import{a as N}from"./axios-Cm0UX6qg.js";const j={key:0,class:"flex items-center justify-center min-h-screen"},q=e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 text-lg"},"è®€å–ä¸­...")],-1),F=[q],A={key:1,class:"flex items-center justify-center p-6 min-h-screen"},B={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},H=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"ğŸ“…"),e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"é†«ç™‚é ç´„"),e("p",{class:"text-gray-600 text-sm"},"è«‹å¡«å¯«æ‚¨çš„é ç´„è³‡è¨Š")],-1),$=e("label",{for:"name",class:"block font-bold text-gray-700 mb-2"},[h(" å§“å "),e("span",{class:"text-red-500"},"*")],-1),L={key:0,class:"text-red-500 text-xs mt-1"},G=e("label",{for:"phone",class:"block font-bold text-gray-700 mb-2"},[h(" è¯çµ¡é›»è©± "),e("span",{class:"text-red-500"},"*")],-1),W={key:0,class:"text-red-500 text-xs mt-1"},z=e("label",{for:"department",class:"block font-bold text-gray-700 mb-2"},[h(" ç§‘åˆ¥ "),e("span",{class:"text-red-500"},"*")],-1),K=e("option",{value:"",disabled:""},"è«‹é¸æ“‡ç§‘åˆ¥",-1),Y=["value"],Z={key:0,class:"text-red-500 text-xs mt-1"},X=e("label",{for:"date",class:"block font-bold text-gray-700 mb-2"},[h(" å°±è¨ºæ—¥ "),e("span",{class:"text-red-500"},"*")],-1),J={key:0,class:"text-red-500 text-xs mt-1"},Q=e("label",{for:"doctor",class:"block font-bold text-gray-700 mb-2"},"ç´„è¨ºé†«ç”Ÿ",-1),ee=e("label",{for:"issue",class:"block font-bold text-gray-700 mb-2"},"çœ‹è¨ºå•é¡Œ/å‚™è¨»äº‹é …",-1),te=e("label",{for:"notes",class:"block font-bold text-gray-700 mb-2"},"å…¶ä»–å‚™è¨»",-1),se=["disabled"],oe={key:0},le={key:1},ae={key:2,class:"flex items-center justify-center p-6 min-h-screen"},ne={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},re=E('<div class="mb-6"><div class="text-6xl mb-4">ğŸ”’</div><h1 class="text-2xl font-bold text-gray-800 mb-2">å°šæœªè¨­å®šè£ç½®</h1><p class="text-gray-600 text-sm">æ‚¨éœ€è¦å…ˆå®Œæˆè£ç½®è¨­å®šæ‰èƒ½ä½¿ç”¨é ç´„åŠŸèƒ½</p></div><div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6 text-left"><p class="text-sm text-gray-700">âš ï¸ è«‹å…ˆç¶å®šæ‚¨çš„èº«åˆ†è­‰è™Ÿç¢¼</p><p class="text-sm text-gray-700 mt-1">å®Œæˆè¨­å®šå¾Œå³å¯é€²è¡Œé ç´„</p></div>',2),de={key:3,class:"flex items-center justify-center p-6 min-h-screen"},ue={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},ie=E('<div class="mb-6"><div class="text-6xl mb-4">âœ…</div><h2 class="text-2xl font-bold text-green-600 mb-2">é ç´„æˆåŠŸï¼</h2><p class="text-gray-700">æ‚¨çš„é ç´„å·²é€å‡º</p></div><div class="bg-green-50 border-l-4 border-green-500 p-4 mb-6 text-left"><p class="text-sm text-gray-700">âœ“ æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„é ç´„ç”³è«‹</p><p class="text-sm text-gray-700 mt-2">è¨ºæ‰€å°‡ç›¡å¿«èˆ‡æ‚¨è¯ç¹«ç¢ºèªé ç´„æ™‚é–“</p></div><div class="bg-blue-50 rounded-lg p-4 mb-6"><p class="text-sm text-gray-600">å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹ç›´æ¥è¯ç¹«è¨ºæ‰€</p></div>',3),ce={__name:"Order",props:["userid"],setup(_){const u=_,i=a(null);console.log("userID",u.userid);const y=a(""),p=a(!1),m=a(!1);a(!1);const x=a(!0);a(!1),a(!1),a(!1),a(!1);const g=a(!1),k=a(!1),P=["ANES/éº»é†‰ç–¼ç—›ç§‘","BS/ä¹³æˆ¿å¤–ç§‘","CM/èƒ¸è…”å…§ç§‘","CVS/å¿ƒè‡Ÿè¡€ç®¡å¤–ç§‘","CRS/ç›´è…¸å¤–ç§‘","CS/èƒ¸è…”å¤–ç§‘","DERM/çš®è†šç§‘","CV/å¿ƒè‡Ÿå…§ç§‘","Diet/ç‡Ÿé¤Šè«®è©¢","ENT/è€³é¼»å–‰ç§‘","FM/å®¶åº­é†«å­¸ç§‘","GI/èƒƒè…¸è‚è†½ç§‘","GS/ä¸€èˆ¬å¤–ç§‘","GU/æ³Œå°¿å¤–ç§‘","OBGY/å©¦ç”¢ç§‘","HEMA/è¡€æ¶²è…«ç˜¤ç§‘","NS/ç¥ç¶“å¤–ç§‘","INF/æ„ŸæŸ“ç§‘","META/æ–°é™³ä»£è¬ç§‘","NEPH/è…è‡Ÿå…§ç§‘","NEUR/ç¥ç¶“å…§ç§‘","OPH/çœ¼ç§‘","ORTH/éª¨ç§‘","PED/å°å…’ç§‘","PS/æ•´å½¢å¤–ç§‘","PSY/ç²¾ç¥ç§‘","REHA/å¾©å¥ç§‘","IMRH/é¢¨æ¿•å…ç–«ç§‘","CADP/è…¹è†œé€æ","å¿ƒç†è«®å•†","PEDS/å°å…’å¤–ç§‘"],s=a({method:"addOrder",personName:"",personPhone:"",issue:"",doctor:"",department:"",orderDate:"",notes:""});let w=null;const b=a(!1),V=()=>{if(b.value=!1,!s.value.personName||!s.value.personPhone||!s.value.department||!s.value.orderDate){b.value=!0;return}w&&clearTimeout(w),w=setTimeout(()=>{const l=new URLSearchParams;l.append("method","addOrder"),l.append("userid",u.userid),l.append("personName",s.value.personName),l.append("issue",s.value.issue),l.append("doctor",s.value.doctor),l.append("personPhone",s.value.personPhone),l.append("department",s.value.department),l.append("orderDate",s.value.orderDate),l.append("notes",s.value.notes||""),g.value=!0,N({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/add_order",data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{g.value=!1,i.value=t.data,x.value=!1,p.value=!1,k.value=!0}).catch(t=>{let o="é ç´„å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯çµ¡è¨ºæ‰€";t.response.data&&(o=t.response.data.message),alert(o),console.log(t)})},2e3)},C=()=>{const l=new FormData;l.append("method","checkUserIDisExist"),l.append("userid",u.userid),console.log(l.get("userid")),N({method:"post",url:"https://script.google.com/macros/s/AKfycbxv0X4hKmjRsqICHL8WTa4nqpql6Rbq9w1njra_4jcFN-OcbZ4zxARyuyN9h2PCvvnB/exec",data:l,headers:{"Content-Type":"text/plain; charset=utf-8"}}).then(t=>{console.log(t),t.data.result==="useridisexist"?(y.value=t.data.personid,i.value=t.data,p.value=!0):(p.value=!1,m.value=!0,i.value=t.data),x.value=!1}).catch(t=>{console.log(t),i.value=t.data})};return I(u,(l,t)=>{console.log("user.userid",u.userid),C()}),(l,t)=>(n(),r(D,null,[x.value?(n(),r("div",j,F)):d("",!0),p.value?(n(),r("div",A,[e("div",B,[H,e("form",{class:"space-y-5",onSubmit:t[7]||(t[7]=S(o=>V(),["prevent"]))},[e("div",null,[$,c(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.personName=o),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",placeholder:"è«‹è¼¸å…¥å§“å",required:""},null,512),[[f,s.value.personName]]),b.value&&!s.value.personName?(n(),r("p",L,"è«‹è¼¸å…¥å§“å")):d("",!0)]),e("div",null,[G,c(e("input",{type:"text",id:"phone","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.personPhone=o),pattern:"[0-9]+",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",placeholder:"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼",required:""},null,512),[[f,s.value.personPhone]]),b.value&&!s.value.personPhone?(n(),r("p",W,"è«‹è¼¸å…¥é›»è©±è™Ÿç¢¼")):d("",!0)]),e("div",null,[z,c(e("select",{id:"department","onUpdate:modelValue":t[2]||(t[2]=o=>s.value.department=o),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",required:""},[K,(n(),r(D,null,T(P,o=>e("option",{value:o,key:o},O(o),9,Y)),64))],512),[[U,s.value.department]]),b.value&&!s.value.department?(n(),r("p",Z,"è«‹é¸æ“‡ç§‘åˆ¥")):d("",!0)]),e("div",null,[X,c(e("input",{type:"date",id:"date","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.orderDate=o),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",required:""},null,512),[[f,s.value.orderDate]]),b.value&&!s.value.orderDate?(n(),r("p",J,"è«‹é¸æ“‡å°±è¨ºæ—¥")):d("",!0)]),e("div",null,[Q,c(e("input",{type:"text",id:"doctor","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.doctor=o),class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",placeholder:"é¸å¡«"},null,512),[[f,s.value.doctor]])]),e("div",null,[ee,c(e("textarea",{id:"issue","onUpdate:modelValue":t[5]||(t[5]=o=>s.value.issue=o),rows:"3",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition resize-none",placeholder:"è«‹æè¿°æ‚¨çš„çœ‹è¨ºå•é¡Œæˆ–å‚™è¨»"},null,512),[[f,s.value.issue]])]),e("div",null,[te,c(e("textarea",{id:"notes","onUpdate:modelValue":t[6]||(t[6]=o=>s.value.notes=o),rows:"3",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition resize-none",placeholder:"æ‚¨æ–¹ä¾¿ç´„è¨ºçš„æ™‚é–“æˆ–å…¶ä»–è³‡è¨Š"},null,512),[[f,s.value.notes]])]),e("button",{type:"submit",class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",disabled:g.value},[g.value?(n(),r("span",oe,"â³ é€å‡ºä¸­...")):(n(),r("span",le,"âœ“ ç¢ºèªé ç´„"))],8,se)],32)])])):d("",!0),m.value?(n(),r("div",ae,[e("div",ne,[re,e("button",{onClick:t[8]||(t[8]=o=>l.$router.push("/")),class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," å‰å¾€è¨­å®š ")])])):d("",!0),k.value?(n(),r("div",de,[e("div",ue,[ie,e("button",{onClick:t[9]||(t[9]=o=>l.$emit("close-window")),class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," é—œé–‰è¦–çª— ")])])):d("",!0)],64))}},pe={class:"text-xl"},fe={__name:"OrderView",setup(_){const u=a(!1),i=a(null),y=a(null);M(async()=>{v.init({liffId:"1657869644-x3BZd5wE"}).then(()=>{v.isLoggedIn()&&(u.value=v.isLoggedIn(),i.value=v.getDecodedIDToken().sub,y.value=v.getDecodedIDToken().email)}).catch(m=>{console.log(m.code,m.message)})});const p=()=>{v.closeWindow()};return(m,x)=>(n(),r("div",pe,[R(ce,{onCloseWindow:p,userid:i.value},null,8,["userid"])]))}};export{fe as default};
