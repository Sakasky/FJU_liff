import{r as o,w as F,o as d,c as i,a as m,b as e,t as P,d as T,e as _,v as y,F as U,f as w,g as V,h as N,l as b,i as q}from"./index-B5zroSmK.js";import{a as v}from"./axios-Cm0UX6qg.js";const A={key:0,class:"flex items-center justify-center min-h-screen"},Z=e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 text-lg"},"讀取中...")],-1),z=[Z],B={key:1,class:"flex items-center justify-center p-6 min-h-screen"},M={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},S=e("div",{class:"mb-6"},[e("div",{class:"text-5xl mb-4"},"✅"),e("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"裝置已設定")],-1),L={class:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 text-left"},W=e("p",{class:"text-sm text-gray-700 mb-2"},"⚠️ 只允許申請單筆帳號",-1),X=e("p",{class:"text-sm text-gray-700"},"您目前設定的身分證號為：",-1),H={class:"text-xl font-bold text-blue-600 mt-2"},G=e("p",{class:"text-gray-600 text-sm mb-6"},"如需修改請洽本診所",-1),J=e("div",{class:"border-t pt-6"},[e("p",{class:"text-gray-700 mb-3"},"若需要預約請填寫"),e("a",{class:"inline-block bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium",href:"https://liff.line.me/1657869644-Z9PmDXzq"},"前往預約")],-1),K={key:2,class:"flex items-center justify-center p-6 min-h-screen"},O={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},Q=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"📋"),e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},"身分驗證"),e("p",{class:"text-gray-600"},"歡迎您申請本系統")],-1),R=e("div",{class:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-4"},[e("p",{class:"text-sm text-gray-700"},"您的裝置尚未設定過身分證驗證"),e("p",{class:"text-sm text-gray-700 mt-1"},"請直接輸入身分證號進行驗證")],-1),Y=e("label",{for:"personid",class:"block font-bold text-gray-700 mb-2"},[w(" 身分證號 "),e("span",{class:"text-red-500"},"*")],-1),ee=e("p",{class:"text-xs text-gray-500 mt-1"},"請使用大寫英文字母",-1),te=e("button",{type:"submit",class:"w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," 送出驗證 ",-1),se={key:3,class:"flex items-center justify-center p-6 min-h-screen"},oe={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},le={class:"mb-6"},ae=e("div",{class:"text-5xl mb-4"},"👤",-1),ne=e("h1",{class:"text-2xl font-bold text-gray-800 mb-4"},"身分確認",-1),de={class:"bg-blue-50 rounded-lg p-6 mb-6"},ie=e("p",{class:"text-gray-700 mb-2"},"請問您是",-1),re={class:"text-3xl font-bold text-blue-600"},ue=e("p",{class:"text-gray-700 mt-2"},"嗎？",-1),ce={class:"flex gap-3"},pe={key:4,class:"flex items-center justify-center p-6 min-h-screen"},me={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full"},be=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"📝"),e("h1",{class:"text-2xl font-bold text-gray-800 mb-2"},"基本資料填寫"),e("p",{class:"text-gray-600 text-sm"},"請輸入基本資料並綁定本裝置")],-1),he={class:"space-y-5"},xe=e("label",{for:"name",class:"block font-bold text-gray-700 mb-2"},[w(" 姓名 "),e("span",{class:"text-red-500"},"*")],-1),fe=e("label",{for:"phone",class:"block font-bold text-gray-700 mb-2"},[w(" 聯絡電話 "),e("span",{class:"text-red-500"},"*")],-1),ve={class:"flex gap-3 pt-4"},ge={key:5,class:"flex items-center justify-center p-6 min-h-screen"},_e={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},ye=V('<div class="mb-6"><div class="text-6xl mb-4">✅</div><h2 class="text-2xl font-bold text-green-600 mb-2">綁定成功！</h2><p class="text-gray-700">本裝置已完成綁定</p></div><div class="bg-green-50 border-l-4 border-green-500 p-4 mb-6"><p class="text-sm text-gray-700">您現在可以使用本系統的所有功能</p></div>',2),we={class:"border-t pt-6 space-y-4"},ke=e("p",{class:"text-gray-700"},"若需要預約請點擊下方按鈕",-1),De=e("a",{class:"block w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm",href:"https://liff.line.me/1657869644-x3BZd5wE"}," 前往預約 ",-1),Ie={key:6,class:"flex items-center justify-center p-6 min-h-screen"},Pe={class:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full text-center"},Ve=V('<div class="mb-6"><div class="text-6xl mb-4">✅</div><h2 class="text-2xl font-bold text-green-600 mb-2">綁定成功！</h2><p class="text-gray-700">本裝置已完成綁定</p></div><div class="bg-green-50 border-l-4 border-green-500 p-4 mb-6"><p class="text-sm text-gray-700">您現在可以使用本系統的所有功能</p></div>',2),Ce={class:"border-t pt-6 space-y-4"},$e=e("p",{class:"text-gray-700"},"若需要預約請點擊下方按鈕",-1),je=e("a",{class:"block w-full bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm",href:"https://liff.line.me/1657869644-Z9PmDXzq"}," 前往預約 ",-1),Ee={__name:"Survey",props:["userid"],setup(k){const a=k,u=o(null);console.log("userID",a);const n=o(""),c=o(""),p=o(""),x=o(!1),g=o(!1),h=o(!1),r=o(!0);o(!1);const f=o(!1),D=o(!1),I=o(!1),C=()=>{const s=new FormData;s.append("personid",n.value),s.append("userid",a.userid),r.value=!0,g.value=!1,v({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/check_vip",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log("response",t),t.data.result==="personidisexist"?(u.value=t.data,r.value=!1,h.value=!0,c.value=t.data.personname):(r.value=!1,h.value=!1,f.value=!0)}).catch(t=>{console.log(t)})},$=()=>{const s=new FormData;s.append("method","addPersonVIP"),s.append("personid",n.value),s.append("userid",a.userid),r.value=!0,h.value=!1,v({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/add_person_vip",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log(t.data),r.value=!1,I.value=!0}).catch(t=>{console.log(t)})},j=()=>{if(!c.value||!p.value){alert("請輸入姓名與電話");return}const s=new FormData;s.append("method","addPersonID"),s.append("personname",c.value),s.append("personphone",p.value),s.append("personid",n.value),s.append("userid",a.userid),r.value=!0,f.value=!1,v({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/add_person_info",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{u.value=t.data,console.log(t),r.value=!1,D.value=!0}).catch(t=>{console.log(t)})},E=()=>{const s=new FormData;s.append("userid",a.userid),v({method:"post",url:"https://fju-line-app.herokuapp.com/infolinebot/check_user_registered",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{t.data.result==="useridisexist"?(n.value=t.data.personid,u.value=t.data,console.log("personID",n),x.value=!0):(x.value=!1,g.value=!0,u.value=t.data),r.value=!1}).catch(t=>{console.log(t),u.value=t.data})};return F(a,(s,t)=>{console.log("user.userid",a.userid),E()}),(s,t)=>(d(),i(U,null,[r.value?(d(),i("div",A,z)):m("",!0),x.value?(d(),i("div",B,[e("div",M,[S,e("div",L,[W,X,e("p",H,P(n.value),1)]),G,J])])):m("",!0),g.value?(d(),i("div",K,[e("div",O,[Q,e("form",{class:"space-y-4",onSubmit:t[1]||(t[1]=T(l=>C(),["prevent"]))},[R,e("div",null,[Y,_(e("input",{type:"text",id:"personid","onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),pattern:"[A-Za-z][0-9]{9}",placeholder:"例如：A123456789",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",title:"請輸入有效的身分證號（範例：A123456789）",required:""},null,512),[[y,n.value]]),ee]),te],32)])])):m("",!0),h.value?(d(),i("div",se,[e("div",oe,[e("div",le,[ae,ne,e("div",de,[ie,e("p",re,P(c.value),1),ue])]),e("div",ce,[e("button",{onClick:t[2]||(t[2]=l=>$()),class:"flex-1 bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," ✓ 是的 "),e("button",{onClick:t[3]||(t[3]=l=>{f.value=!0,h.value=!1}),class:"flex-1 bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition font-medium shadow-sm"}," ✗ 不是 ")])])])):m("",!0),f.value?(d(),i("div",pe,[e("div",me,[be,e("form",he,[e("div",null,[xe,_(e("input",{type:"text",id:"name","onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l),pattern:"[A-Za-z\\u4e00-\\u9fa5]+",placeholder:"請輸入姓名",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",title:"請輸入姓名",required:""},null,512),[[y,c.value]])]),e("div",null,[fe,_(e("input",{type:"text",id:"phone","onUpdate:modelValue":t[5]||(t[5]=l=>p.value=l),pattern:"[0-9]+",placeholder:"請輸入聯絡電話",class:"w-full border border-gray-300 rounded-md px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition",title:"請輸入聯絡電話",required:""},null,512),[[y,p.value]])]),e("div",ve,[e("button",{type:"button",onClick:t[6]||(t[6]=l=>j()),class:"flex-1 bg-blue-500 text-white px-6 py-3 rounded-md hover:bg-blue-600 transition font-medium shadow-sm"}," 確認送出 "),e("button",{type:"button",onClick:t[7]||(t[7]=l=>s.$emit("close-window")),class:"flex-1 bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition font-medium shadow-sm"}," 取消 ")])])])])):m("",!0),D.value?(d(),i("div",ge,[e("div",_e,[ye,e("div",we,[ke,De,e("button",{onClick:t[8]||(t[8]=l=>s.$emit("close-window")),class:"w-full bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition font-medium"}," 關閉 ")])])])):m("",!0),I.value?(d(),i("div",Ie,[e("div",Pe,[Ve,e("div",Ce,[$e,je,e("button",{onClick:t[9]||(t[9]=l=>s.$emit("close-window")),class:"w-full bg-gray-500 text-white px-6 py-3 rounded-md hover:bg-gray-600 transition font-medium"}," 關閉 ")])])])):m("",!0)],64))}},Fe={class:"text-xl"},Te={key:0,class:"text-center"},qe={__name:"Home",setup(k){const a=o(!1),u=o(null),n=o(null);N(async()=>{b.init({liffId:"1657869644-jDxqpoMV"}).then(()=>{b.isLoggedIn()&&(a.value=b.isLoggedIn(),u.value=b.getDecodedIDToken().sub,n.value=b.getDecodedIDToken().email)}).catch(p=>{console.log(p.code,p.message)})});const c=()=>{b.closeWindow()};return(p,x)=>(d(),i("div",Fe,[a.value?(d(),i("p",Te)):m("",!0),q(Ee,{onCloseWindow:c,userid:u.value},null,8,["userid"])]))}};export{qe as default};
