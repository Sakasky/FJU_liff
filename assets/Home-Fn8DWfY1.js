import{r as l,w as N,o as u,c as r,a as v,b as t,d as c,t as q,e as g,v as w,f as F,F as $,g as A,l as x,h as R}from"./index-BeaFRpZ9.js";import{a as y}from"./axios-Cm0UX6qg.js";const T={key:0,class:"flex items-center justify-center m-auto pt-10"},z={key:1,class:"flex items-center justify-center flex-col p-10 text-center"},E=t("p",null,"æœ¬è£ç½®å·²ç¶“è¨­å®šéŽ",-1),U={class:"text-blue-500"},Z=t("p",null,[c("è‹¥éœ€è¦é ç´„è«‹å¡«å¯«"),t("a",{class:"text-blue-500 underline",href:"https://liff.line.me/1657869644-Z9PmDXzq"},"é ç´„å–®")],-1),K={key:2,class:"flex items-center justify-center flex-col p-10 text-center"},B=t("h1",{class:"text-2xl font-bold text-center"},"å•å·èª¿æŸ¥",-1),L=t("p",null,"æ­¡è¿Žæ‚¨ç”³è«‹æœ¬ç³»çµ±ðŸ‘‡ ",-1),W=t("p",null,"æ‚¨çš„è£ç½®å°šæœªè¨­å®šéŽèº«åˆ†è­‰é©—è­‰ ",-1),X=t("p",null,"è«‹ç›´æŽ¥è¼¸å…¥èº«åˆ†è­‰è™Ÿé€²è¡Œé©—è­‰(è«‹ä½¿ç”¨å¤§å¯«å­—æ¯)",-1),H=t("label",{for:"name",class:"block mt-4"},[c("è«‹å•æ‚¨çš„èº«åˆ†è­‰è™Ÿï¼š"),t("span",{class:"text-red-500 text-sm"},"ï¼Š")],-1),M=t("button",{type:"submit",class:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded"},"é€å‡º",-1),O={key:3,class:"flex items-center justify-center flex-col p-10 text-center"},S=t("h1",{class:"text-2xl font-bold text-center"},"ç¢ºèª",-1),G={class:"text-blue-500"},J={key:4,class:"flex items-center justify-center flex-col p-10 text-center"},Q=t("h1",{class:"text-2xl font-bold text-center"},"åŸºæœ¬è³‡æ–™èˆ‡ç¶å®šè£ç½®",-1),Y={key:5,class:"flex items-center justify-center flex-col p-10 text-center"},ee=t("p",null,"æœ¬è£ç½®å®Œæˆç¶å®š",-1),te=t("p",null,[c("è‹¥éœ€è¦é ç´„è«‹å¡«å¯«"),t("a",{class:"text-blue-500 underline",href:"https://liff.line.me/1657869644-Z9PmDXzq"},"é ç´„å–®")],-1),se={key:6,class:"flex items-center justify-center flex-col p-10 text-center"},le=t("p",null,"æœ¬è£ç½®å®Œæˆç¶å®š",-1),oe=t("p",null,[c("è‹¥éœ€è¦é ç´„è«‹å¡«å¯«"),t("a",{class:"text-blue-500 underline",href:"https://liff.line.me/1657869644-Z9PmDXzq"},"é ç´„å–®")],-1),ne={__name:"Survey",props:["userid"],setup(D){const n=D,i=l(null);console.log("userID",n);const a=l(""),p=l(""),m=l(""),h=l(!1),_=l(!1),f=l(!1),d=l(!0);l(!1);const b=l(!1),I=l(!1),k=l(!1),C=()=>{const s=new FormData;s.append("method","checkVIPisExist"),s.append("personid",a.value),s.append("userid",n.userid),d.value=!0,_.value=!1,y({method:"post",url:"https://script.google.com/macros/s/AKfycbxv0X4hKmjRsqICHL8WTa4nqpql6Rbq9w1njra_4jcFN-OcbZ4zxARyuyN9h2PCvvnB/exec",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log("response",e),e.data.result==="personidisexist"?(i.value=e.data,d.value=!1,f.value=!0,p.value=e.data.personname):(d.value=!1,f.value=!1,b.value=!0)}).catch(e=>{console.log(e)})},P=()=>{const s=new FormData;s.append("method","addPersonVIP"),s.append("personid",a.value),s.append("userid",n.userid),d.value=!0,f.value=!1,y({method:"post",url:"https://script.google.com/macros/s/AKfycbxv0X4hKmjRsqICHL8WTa4nqpql6Rbq9w1njra_4jcFN-OcbZ4zxARyuyN9h2PCvvnB/exec",data:s,headers:{"Content-Type":"text/plain; charset=utf-8"}}).then(e=>{console.log(e.data),d.value=!1,k.value=!0}).catch(e=>{console.log(e)})},j=()=>{if(!p.value||!m.value){alert("è«‹è¼¸å…¥å§“åèˆ‡é›»è©±");return}const s=new FormData;s.append("method","addPersonID"),s.append("personname",p.value),s.append("personphone",m.value),s.append("personid",a.value),s.append("userid",n.userid),d.value=!0,b.value=!1,y({method:"post",url:"https://script.google.com/macros/s/AKfycbxv0X4hKmjRsqICHL8WTa4nqpql6Rbq9w1njra_4jcFN-OcbZ4zxARyuyN9h2PCvvnB/exec",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.value=e.data,console.log(e),d.value=!1,I.value=!0}).catch(e=>{console.log(e)})},V=()=>{const s=new FormData;s.append("method","checkUserIDisExist"),s.append("userid",n.userid),y({method:"post",url:"https://script.google.com/macros/s/AKfycbxv0X4hKmjRsqICHL8WTa4nqpql6Rbq9w1njra_4jcFN-OcbZ4zxARyuyN9h2PCvvnB/exec",data:s,headers:{"Content-Type":"text/plain; charset=utf-8"}}).then(e=>{e.data.result==="useridisexist"?(a.value=e.data.personid,i.value=e.data,console.log("personID",a),h.value=!0):(h.value=!1,_.value=!0,i.value=e.data),d.value=!1}).catch(e=>{console.log(e),i.value=e.data})};return N(n,(s,e)=>{console.log("user.userid",n.userid),V()}),(s,e)=>(u(),r($,null,[d.value?(u(),r("div",T," è®€å–ä¸­ ")):v("",!0),h.value?(u(),r("div",z,[E,t("p",null,[c("âš ï¸åªå…è¨±ç”³è«‹å–®ç­†å¸³è™Ÿæ‚¨ç›®å‰è¨­å®šä¹‹èº«åˆ†è­‰è™Ÿ"),t("span",U,q(a.value),1),c("ç‚ºå¦‚éœ€ä¿®æ”¹è«‹æ´½æœ¬è¨ºæ‰€")]),Z])):v("",!0),_.value?(u(),r("div",K,[B,t("form",{class:"flex flex-col items-center",onSubmit:e[1]||(e[1]=F(o=>C(),["prevent"]))},[L,W,X,H,g(t("input",{type:"text",id:"personid","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),pattern:"[A-Za-z][0-9]{9}",placeholder:"èº«åˆ†è­‰è™Ÿ",class:"border border-gray-300 rounded-md px-2 py-1 mt-1",title:"è«‹è¼¸å…¥æœ‰æ•ˆçš„å§“åï¼ˆç¯„ä¾‹ï¼šF123456789ï¼‰",required:""},null,512),[[w,a.value]]),M],32)])):v("",!0),f.value?(u(),r("div",O,[S,c(" è«‹å•æ‚¨æ˜¯"),t("span",G,q(p.value),1),c("å—Žï¼Ÿ "),t("button",{onClick:e[2]||(e[2]=o=>P()),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"æ˜¯"),t("button",{onClick:e[3]||(e[3]=o=>{b.value=!0,f.value=!1}),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"å¦")])):v("",!0),b.value?(u(),r("div",J,[Q,c(" è«‹è¼¸å…¥åŸºæœ¬è³‡æ–™ï¼Œä¸¦ä¸”ç¶å®šæœ¬è£ç½®ã€‚ "),g(t("input",{type:"text",id:"name","onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o),pattern:"[A-Za-z]+",placeholder:"å§“å",class:"border border-gray-300 rounded-md px-2 py-1 mt-1",title:"è«‹è¼¸å…¥å§“å",required:""},null,512),[[w,p.value]]),g(t("input",{type:"text",id:"phone","onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o),pattern:"[0-9]+",placeholder:"è¯çµ¡é›»è©±",class:"border border-gray-300 rounded-md px-2 py-1 mt-1",title:"è«‹è¼¸å…¥è¯çµ¡é›»è©±",required:""},null,512),[[w,m.value]]),t("button",{onClick:e[6]||(e[6]=o=>j()),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"ç¢ºèª"),t("button",{onClick:e[7]||(e[7]=o=>s.$emit("close-window")),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"å–æ¶ˆ")])):v("",!0),I.value?(u(),r("div",Y,[ee,te,t("button",{onClick:e[8]||(e[8]=o=>s.$emit("close-window")),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"ç¢ºèª")])):v("",!0),k.value?(u(),r("div",se,[le,oe,t("button",{onClick:e[9]||(e[9]=o=>s.$emit("close-window")),class:"mt-4 bg-blue-500 text-white px-4 py-2 rounded"},"ç¢ºèª")])):v("",!0)],64))}},ae={class:"text-xl"},ue={key:0,class:"text-center"},ce={__name:"Home",setup(D){const n=l(!1),i=l(null),a=l(null);A(async()=>{x.init({liffId:"1657869644-jDxqpoMV"}).then(()=>{x.isLoggedIn()&&(n.value=x.isLoggedIn(),i.value=x.getDecodedIDToken().sub,a.value=x.getDecodedIDToken().email)}).catch(m=>{console.log(m.code,m.message)})});const p=()=>{x.closeWindow()};return(m,h)=>(u(),r("div",ae,[n.value?(u(),r("p",ue)):v("",!0),R(ne,{onCloseWindow:p,userid:i.value},null,8,["userid"])]))}};export{ce as default};
